# Field configuration.
top_field_config_raw:
  type: yaml.YAMLDataSet
  filepath: data/01_raw/field_config_tifton_top.yml

middle_field_config_raw:
  type: yaml.YAMLDataSet
  filepath: data/01_raw/field_config_tifton_middle.yml

bottom_field_config_raw:
  type: yaml.YAMLDataSet
  filepath: data/01_raw/field_config_tifton_bottom.yml

# Plot boundaries.
plot_borders_top:
  type: cotton_counter.data_sets.ShapefileDataSet
  filepath: data/01_raw/plot_boundaries/top/2023-08-14_plot_borders_top.shp

plot_borders_middle:
  type: cotton_counter.data_sets.ShapefileDataSet
  filepath: data/01_raw/plot_boundaries/middle/2023-08-14_plot_borders_middle.shp

plot_borders_bottom:
  type: cotton_counter.data_sets.ShapefileDataSet
  filepath: data/01_raw/plot_boundaries/bottom/2023-08-14_plot_borders_bottom.shp

# Plot sampling locations for ground truth.
plot_gt_sample_locations_top:
  type: cotton_counter.data_sets.ShapefileDataSet
  filepath: data/01_raw/plot_boundaries/top/2023-08-14_plot_sampling_locations_top.shp

plot_gt_sample_locations_middle:
  type: cotton_counter.data_sets.ShapefileDataSet
  filepath: data/01_raw/plot_boundaries/middle/2023-08-14_plot_sampling_locations_middle.shp

plot_gt_sample_locations_bottom:
  type: cotton_counter.data_sets.ShapefileDataSet
  filepath: data/01_raw/plot_boundaries/bottom/2023-08-14_plot_sampling_locations_bottom.shp

  # Datasets containing the ground-truth.
_gt_params: &gt_params
  type: pandas.ExcelDataSet
  filepath: data/01_raw/2023_ground_truth_counts.xlsx

_gt_load_args: &gt_load_args
  engine: openpyxl
  # Otherwise it reads empty boxes as NA...
  na_filter: false

gt_2023-08-14:
  << : *gt_params
  load_args:
    sheet_name: "8-14-23"
    << : *gt_load_args

# Datasets containing raw images to process.
_image_params: &image_params
  type: PartitionedDataSet
  filename_suffix: ".JPG"
  dataset:
    type: pillow.ImageDataSet

# Datasets containing the camera configuration.
user_camera_config:
  type: yaml.YAMLDataSet
  filepath: data/01_raw/camera_config.yml

2023-08-14_auto_camera_config:
  type: text.TextDataSet
  filepath: data/01_raw/metashape_cameras/2023-08-14_cameras.xml

# Datasets containing raw images.
images_2023-08-14:
  path: ${corrected_image_dir}/2023-08-14
  << : *image_params

# Shapefile containing the image extents.
image_extents_2023-08-14:
  type: cotton_counter.data_sets.ShapefileDataSet
  filepath: data/08_reporting/image_extents.shp
  versioned: True
  schema:
    geometry: Polygon
    properties:
      - [ image_id, str ]
  epsg_crs: 32617

# Shapefile containing the output bounding boxes.
bounding_box_shapes:
  type: cotton_counter.data_sets.ShapefileDataSet
  filepath: data/08_reporting/bounding_boxes.shp
  versioned: True
  schema:
    geometry: Polygon
    properties:
      - [confidence, float]
      - [session, str]
      - [image_id, str]
      - [box_num, int]
  epsg_crs: 32617