# Field configuration.
j1_field_config_params:
  type: yaml.YAMLDataSet
  filepath: data/01_raw/field_config_j1.yml
  versioned: False

j2_field_config_params:
  type: yaml.YAMLDataSet
  filepath: data/01_raw/field_config_j2.yml
  versioned: False

# Dataset containing the genotype information.
genotype_spreadsheet:
  type: pandas.ExcelDataSet
  filepath: data/01_raw/IHF_NILs_Genotype_Information.xlsx
  versioned: False
  load_args:
    engine: openpyxl

# Dataset containing the ground-truth count data.
ground_truth_spreadsheet:
  type: pandas.ExcelDataSet
  filepath: data/01_raw/ground_truth_counts.xlsx
  versioned: False
  load_args:
    engine: openpyxl

# Dataset containing the ground-truth height data.
ground_truth_height_spreadsheet:
  type: pandas.ExcelDataSet
  filepath: data/01_raw/ground_truth_heights.xlsx
  versioned: False
  load_args:
    engine: openpyxl

# Dataset containing the list of empty plots.
empty_plots_j2:
  type: pandas.CSVDataSet
  filepath: data/01_raw/empty_plots_j2.csv
  save_args:
    index: false

# Datasets containing extracted plot images to process.
_plot_image_params: &plot_image_params
  type: PartitionedDataSet
  filename_suffix: ".tif"
  dataset:
    type: pillow.ImageDataSet

plots_2021-08-09:
  path: ${plot_image_dir}/p4/2021-08-09
  << : *plot_image_params

plots_2021-08-13:
  path: ${plot_image_dir}/p4/2021-08-13
  << : *plot_image_params

plots_2021-08-16:
  path: ${plot_image_dir}/p4/2021-08-16
  << : *plot_image_params

plots_2021-08-20:
  path: ${plot_image_dir}/p4/2021-08-20
  << : *plot_image_params

plots_2021-08-27:
  path: ${plot_image_dir}/m100/2021-08-27
  << : *plot_image_params

plots_2021-08-30:
  path: ${plot_image_dir}/m100/2021-08-30
  << : *plot_image_params

plots_2021-09-03:
  path: ${plot_image_dir}/m100/2021-09-03
  << : *plot_image_params

plots_2021-09-06:
  path: ${plot_image_dir}/m100/2021-09-06
  << : *plot_image_params

plots_2021-09-10:
  path: ${plot_image_dir}/m100/2021-09-10
  << : *plot_image_params

plots_2021-09-13:
  path: ${plot_image_dir}/m100/2021-09-13
  << : *plot_image_params

plots_2021-09-17:
  path: ${plot_image_dir}/m100/2021-09-17
  << : *plot_image_params

plots_2021-09-24:
  path: ${plot_image_dir}/m100/2021-09-24
  << : *plot_image_params

plots_2021-09-27:
  path: ${plot_image_dir}/m100/2021-09-27
  << : *plot_image_params

plots_2021-10-01:
  path: ${plot_image_dir}/m100/2021-10-01
  << : *plot_image_params

plots_2021-10-08:
  path: ${plot_image_dir}/p4/2021-10-08
  << : *plot_image_params

plots_2021-10-11:
  path: ${plot_image_dir}/m100/2021-10-11
  << : *plot_image_params

plots_2021-10-15:
  path: ${plot_image_dir}/m100/2021-10-15
  << : *plot_image_params

plots_2021-10-18:
  path: ${plot_image_dir}/m100/2021-10-18
  << : *plot_image_params

plots_2021-10-22:
  path: ${plot_image_dir}/m100/2021-10-22
  << : *plot_image_params

plots_2021-10-25:
  path: ${plot_image_dir}/m100/2021-10-25
  << : *plot_image_params

plots_2021-10-29:
  path: ${plot_image_dir}/m100/2021-10-29
  << : *plot_image_params

plots_2021-11-01:
  path: ${plot_image_dir}/m100/2021-11-01
  << : *plot_image_params

plots_2021-11-05:
  path: ${plot_image_dir}/m100/2021-11-05
  << : *plot_image_params

# Dataset containing all plot images.
all_plot_images:
  type: MemoryDataSet
  copy_mode: assign

# This contains height data.
plots_dem_j1:
  path: ${plot_image_dir}/m100/2021-12-13/j1
  <<: *plot_image_params

plots_dem_j2:
  path: ${plot_image_dir}/m100/2021-12-13/j2
  <<: *plot_image_params

# This contains qualitative plot image examples.
qualitative_examples:
  type: PartitionedDataSet
  path: data/01_raw/qualitative_examples
  filename_suffix: ".tif"
  dataset:
    type: pillow.ImageDataSet

# Dataset containing all the detection results.
detection_results:
  type: pandas.ParquetDataSet
  filepath: data/03_primary/detection_results.parquet
  versioned: True

# Dataset containing estimated counts for each plot.
counting_results:
  type: pandas.ParquetDataSet
  filepath: data/03_primary/counting_results.parquet
  versioned: True

# Segment Anything model to use.
sam_model:
  type: MemoryDataSet
  copy_mode: assign

# Dateset containing the masks for each plot.
mask_results:
  type: PartitionedDataSet
  path: data/03_primary/flower_masks
  filename_suffix: ".png"
  dataset:
    type: pillow.ImageDataSet

# Dataset containing estimated heights for each plot.
detection_plot_heights_j1:
  type: pandas.ParquetDataSet
  filepath: data/03_primary/detection_plot_heights_j1.parquet
  versioned: True

detection_plot_heights_j2:
  type: pandas.ParquetDataSet
  filepath: data/03_primary/detection_plot_heights_j2.parquet
  versioned: True

# Dataset containing the final counts in a human-readable format.
human_readable_counts:
  type: pandas.ExcelDataSet
  filepath: data/08_reporting/plot_counts.xlsx
  versioned: True

# Dataset containing per-plot metrics in a human-readable format.
human_readable_metrics:
  type: pandas.ExcelDataSet
  filepath: data/08_reporting/plot_metrics.xlsx
  versioned: True

# Dataset containing the final heights in a human-readable format.
human_readable_heights:
  type: pandas.ExcelDataSet
  filepath: data/08_reporting/plot_heights.xlsx
  versioned: True

# Histogram of the peak flowering times.
peak_flowering_histogram:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/peak_flowering_histogram.png
  versioned: True

# Histogram of flowering start times.
flowering_start_histogram:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/flowering_start_histogram.png
  versioned: True

# Histogram of flowering end times.
flowering_end_histogram:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/flowering_end_histogram.png
  versioned: True

# Histogram of flowering durations.
flowering_duration_histogram:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/flowering_duration_histogram.png
  versioned: True

# Histogram of flowering slopes.
flowering_slope_histogram:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/flowering_slope_histogram.png
  versioned: True

# Histogram of final plot heights.
plot_height_histogram:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/plot_height_histogram.png
  versioned: True

# Comparison of the peak flowering times for different populations.
peak_flowering_comparison:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/peak_flowering_comparison.png
  versioned: True

# Comparison of flowering start times for different populations.
flowering_start_comparison:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/flowering_start_comparison.png
  versioned: True

# Comparison of flowering end times for different populations.
flowering_end_comparison:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/flowering_end_comparison.png
  versioned: True

# Comparison of flowering durations for different populations.
flowering_duration_comparison:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/flowering_duration_comparison.png
  versioned: True

# Comparison of flowering slopes for different populations.
flowering_slope_comparison:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/flowering_slope_comparison.png
  versioned: True

# Comparison of final plot heights for different populations.
plot_height_comparison:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/plot_height_comparison.png
  versioned: True

# Comparison of the flower sizes for different populations.
flower_size_comparison:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/flower_size_comparison.png
  versioned: True

# Individual flowering curves for each plot.
flowering_curves:
  type: PartitionedDataSet
  path: data/08_reporting/flowering_curves
  dataset:
    type: matplotlib.MatplotlibWriter
  filename_suffix: .png

# Mean flowering curve for each population.
mean_flowering_curve:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/mean_flowering_curve.png
  versioned: True

# Plot of the regression with the ground-truth counts.
ground_truth_regression_plot:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/ground_truth_regression.png
  versioned: True

# Plot of the regression with the ground-truth heights.
height_ground_truth_regression_plot:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/height_ground_truth_regression.png
  versioned: True

# Plot of ground-truth vs. predicted data.
ground_truth_vs_predicted:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/ground_truth_vs_predicted.png
  versioned: True

# Dateset containing qualitative examples with detections overlayed.
qualitative_example_detections:
  type: PartitionedDataSet
  path: data/08_reporting/qualitative_example_detections
  filename_suffix: ".png"
  dataset:
    type: pillow.ImageDataSet
